\usepackage[parfill]{parskip} % Better line breaks
\usepackage[norwegian]{babel} % make stuff be in norwegian

\usepackage{emptypage}
\usepackage{subcaption}
\usepackage{multicol}
\usepackage{lipsum} % filler text
\usepackage{graphicx} % images
\usepackage{xparse} % More advanced document commands
\usepackage{url} % Typeset urls better
\usepackage{luacode}

% Colors
\usepackage{color}
\usepackage{xcolor} % Colored text: \textcolor{color}{text}

% Fonts
\usepackage{fontspec}
\setmainfont{IBMPlexSerif}[
    Extension = .otf,
    UprightFont = *-Regular,
    BoldFont = *-Bold,
    ItalicFont = *-Italic,
    BoldItalicFont = *-BoldItalic,
]
\setsansfont{IBMPlexSans}[
    Extension = .otf,
    UprightFont = *-Regular,
    BoldFont = *-Bold,
    ItalicFont = *-Italic,
    BoldItalicFont = *-BoldItalic,
]
\setmonofont{IBMPlexMono}[
    Extension = .otf,
    UprightFont = *-Regular,
    BoldFont = *-Bold,
    ItalicFont = *-Italic,
    BoldItalicFont = *-BoldItalic,
]

% Math stuff
\usepackage{amsmath, amsfonts, mathtools, amsthm, amssymb, array}
\usepackage{mathrsfs}
\usepackage{cancel} % cancel stuff
\usepackage{bm} % bold math
\usepackage{systeme} % equation systems
% Polynomial division
\usepackage{polynom}
\newcommand{\polynomdiv}[2]{\par\polylongdiv[style=C,div=:]{#1}{#2}\par}
\mathtoolsset{showonlyrefs}
\setlength{\parindent}{0pt}
% Shortcuts
\newcommand\N{\ensuremath{\mathbb{N}}}
\newcommand\R{\ensuremath{\mathbb{R}}}
\newcommand\Z{\ensuremath{\mathbb{Z}}}
\renewcommand\O{\ensuremath{\emptyset}}
\newcommand\Q{\ensuremath{\mathbb{Q}}}
\newcommand\C{\ensuremath{\mathbb{C}}}
\let\implies\Rightarrow
\let\impliedby\Leftarrow
\let\iff\Leftrightarrow

\newcommand{\ans}[1]{%
  \directlua{
    local input = "#1"
    local lhs, rhs = input:match("^(.-)&(.*)$")
    tex.print("\\underline{\\underline{" .. lhs .. "}\\vphantom{" .. rhs .. "}}&\\underline{\\underline{\\vphantom{" .. lhs .. "}" .. rhs .. "}}")
  }%
}

% Tables
\usepackage{booktabs} % Better looking tables
\usepackage{colortbl}
\newcommand{\gray}{\rowcolor[gray]{.9}} % Use at the start of row to make gray

% tikz and pgfplots
\usepackage{siunitx}
% \sisetup{locale = NO}
\usepackage{tikz} % Tikzpicture to draw pictures
\usetikzlibrary{calc, angles, quotes, arrows}
% \usepackage{pgfplots}
% \pgfplotsset{compat=1.18,width=10cm}
% \usepgfplotslibrary{external}
% \tikzexternalize
\usepackage[siunitx]{circuitikz} % Circuit diagrams

% horizontal rule
\newcommand\hr{
    \vspace{3mm}
    \noindent\hrule
}

\newcommand\hide[1]{} % hide stuff

\usepackage{minted, tcolorbox}
\tcbuselibrary{breakable} % breakable boxes
\tcbuselibrary{skins}
\tcbuselibrary{minted} % syntax highlighting
\setminted{tabsize=2, fontsize=\footnotesize, breaklines, autogobble} % Global settings for all environments

% Commands
\newminted[coderesult]{text}{} % \coderesult
\newminted{python}{} % \pythoncode
\newminted[shellcode]{shell-session}{} % \shellcode e.g. [root@localhost ~]# nvim test.txt
\newmintedfile{python}{} % \pythonfile{path/to/file}

\newcommand\dashlabel[1]{
    \vspace{4mm}\begin{tikzpicture}[overlay, remember picture]
        \draw[dashed, color=darkgray] (0,0) -- (\textwidth,0);
        \node[
            fill=darkgray,
            text=white,
            rounded corners,
            inner sep=4pt,
            anchor=west,
        ] at (0,0) {\small#1};
    \end{tikzpicture}\vspace{4mm}\par
}
\newtcolorbox{codebox}[1]{
    title=#1,
    fonttitle=\bfseries\sffamily,
    toprule=1mm,
    enhanced jigsaw,
    breakable,
    toprule at break=0mm,
    bottomrule at break=0mm
}

% Tcolorboxes
\newtcolorbox{taskbox}[1]{
    title=Oppgave #1,
    colframe=green!60!black,
    colback=green!5!white,
    fonttitle=\bfseries\sffamily,
    toprule=1mm,
    after skip=0mm,
    enhanced jigsaw,
    breakable,
    toprule at break=0mm,
    bottomrule at break=0mm
}

% Links in \tableofcontents
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}
